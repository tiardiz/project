"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[336],{336:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var l=a(768),s=a(144),r=a(232),c=a(130),n=a(387),o=a(373);const i={key:0,class:"container mx-auto px-4 py-6"},u={class:"text-sm text-gray-500 mb-1"},d={class:"text-3xl font-bold text-gray-800 mb-4"},p=["src"],m={class:"text-gray-700 text-lg mb-6"},v={class:"text-sm text-gray-500 italic mb-6"},x={class:"flex justify-end items-center gap-4 text-sm text-gray-500 mb-8"},h={class:"inline-flex items-center gap-1"},k={class:"inline-flex items-center gap-1"},g={class:"bg-gray-100 p-4 rounded-md"},w={class:"space-y-2 mb-4"},b=["onClick"],y={__name:"NewsDetail",setup(e){const t=(0,n.lq)(),a=(0,n.rd)(),y=t.params.id,L=(0,s.KR)(null),f=(0,s.KR)([]),C=(0,s.KR)(""),_=async()=>{try{const e=await o.A.get(`http://127.0.0.1:8000/api/news/${y}`);L.value=e.data}catch(e){console.error("Ошибка при загрузке новости:",e)}},j=async()=>{try{const e=await o.A.get(`http://127.0.0.1:8000/api/news/${y}/comments`);f.value=e.data}catch(e){console.error("Ошибка при загрузке комментариев:",e)}},A=async()=>{try{await o.A.post(`http://127.0.0.1:8000/api/news/${y}/comments`,{content:C.value}),C.value="",j()}catch(e){console.error("Ошибка при добавлении комментария:",e)}},$=async e=>{if(confirm("Удалить комментарий?"))try{await o.A.delete(`http://127.0.0.1:8000/api/comments/${e}`),j()}catch(t){console.error("Ошибка при удалении комментария:",t)}};return(0,l.sV)(()=>{_(),j()}),(e,t)=>L.value?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.Lk)("button",{class:"mb-4 text-blue-600 hover:underline text-sm",onClick:t[0]||(t[0]=e=>(0,s.R1)(a).push("/"))}," ← На главную "),(0,l.Lk)("p",u," Опубликовано: "+(0,r.v_)(new Date(L.value.created_at).toLocaleString()),1),(0,l.Lk)("h2",d,(0,r.v_)(L.value.title),1),(0,l.Lk)("img",{src:L.value.image,alt:"News Image",class:"w-50 h-64 object-cover rounded-lg mb-4"},null,8,p),(0,l.Lk)("p",m,(0,r.v_)(L.value.body),1),(0,l.Lk)("p",v," Автор: "+(0,r.v_)(L.value.author),1),(0,l.Lk)("div",x,[(0,l.Lk)("span",h,[t[2]||(t[2]=(0,l.Lk)("svg",{class:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[(0,l.Lk)("path",{"fill-rule":"evenodd",d:"M4.998 7.78C6.729 6.345 9.198 5 12 5c2.802 0 5.27 1.345 7.002 2.78a12.713 12.713 0 0 1 2.096 2.183c.253.344.465.682.618.997.14.286.284.658.284 1.04s-.145.754-.284 1.04a6.6 6.6 0 0 1-.618.997 12.712 12.712 0 0 1-2.096 2.183C17.271 17.655 14.802 19 12 19c-2.802 0-5.27-1.345-7.002-2.78a12.712 12.712 0 0 1-2.096-2.183 6.6 6.6 0 0 1-.618-.997C2.144 12.754 2 12.382 2 12s.145-.754.284-1.04c.153-.315.365-.653.618-.997A12.714 12.714 0 0 1 4.998 7.78ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z","clip-rule":"evenodd"})],-1)),(0,l.eW)(" "+(0,r.v_)(L.value.views),1)]),(0,l.Lk)("span",k,[t[3]||(t[3]=(0,l.Lk)("svg",{class:"w-6 h-6 text-gray-800 dark:text-white","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24"},[(0,l.Lk)("path",{d:"m12.75 20.66 6.184-7.098c2.677-2.884 2.559-6.506.754-8.705-.898-1.095-2.206-1.816-3.72-1.855-1.293-.034-2.652.43-3.963 1.442-1.315-1.012-2.678-1.476-3.973-1.442-1.515.04-2.825.76-3.724 1.855-1.806 2.201-1.915 5.823.772 8.706l6.183 7.097c.19.216.46.34.743.34a.985.985 0 0 0 .743-.34Z"})],-1)),(0,l.eW)((0,r.v_)(L.value.likes),1)])]),(0,l.Lk)("div",g,[t[5]||(t[5]=(0,l.Lk)("h3",{class:"text-lg font-semibold mb-2"}," Комментарии: ",-1)),(0,l.Lk)("ul",w,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(f.value,e=>((0,l.uX)(),(0,l.CE)("li",{key:e.id,class:"text-sm text-gray-800 border-b pb-1 flex justify-between items-center"},[(0,l.Lk)("span",null,(0,r.v_)(e.content),1),(0,l.Lk)("button",{class:"text-red-500 text-xs hover:underline",onClick:t=>$(e.id)}," удалить ",8,b)]))),128))]),(0,l.Lk)("form",{class:"flex gap-2",onSubmit:(0,c.D$)(A,["prevent"])},[(0,l.bo)((0,l.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),placeholder:"Ваш комментарий",class:"flex-1 p-2 border rounded-md"},null,512),[[c.Jo,C.value]]),t[4]||(t[4]=(0,l.Lk)("button",{type:"submit",class:"bg-blue-600 text-white px-4 py-2 rounded-md"}," Отправить ",-1))],32)])])):(0,l.Q3)("",!0)}},L=y,f=L}}]);
//# sourceMappingURL=336.3ed536aa.js.map